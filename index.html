<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOGO NEURAL OS | FINAL STABLE</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=JetBrains+Mono:wght@400;800&display=swap');
        :root { --neon: #00f2ff; --bg: #000408; --err: #ff0044; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background: var(--bg); color: #fff; font-family: 'JetBrains Mono', monospace; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        .grid { display: grid; grid-template-columns: 350px 1fr 320px; height: 100vh; gap: 15px; padding: 15px; }
        .panel { border: 2px solid var(--neon); border-radius: 20px; padding: 20px; background: rgba(0, 242, 255, 0.05); overflow: hidden; }
        .terminal { background: #000; border: 2px solid var(--neon); border-radius: 25px; padding: 25px; height: 100%; overflow-y: auto; box-shadow: inset 0 0 30px rgba(0, 242, 255, 0.2); }
        .orb { width: 140px; height: 140px; background: radial-gradient(circle, #fff, var(--neon), #000); border-radius: 50%; box-shadow: 0 0 50px var(--neon); cursor: pointer; margin: auto; }
        .orb.active { animation: pulse 0.5s infinite alternate; }
        @keyframes pulse { to { transform: scale(1.1); box-shadow: 0 0 90px var(--neon); } }
        footer { grid-column: 1 / span 3; border: 2px solid var(--neon); border-radius: 50px; display: flex; padding: 10px 30px; align-items: center; margin-top: -80px; z-index: 100; background: #000; }
        input { flex: 1; background: transparent; border: none; color: #fff; font-size: 18px; outline: none; }
        .btn { background: var(--neon); border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; }
        video { display: none; }
    </style>
</head>
<body>
    <video id="vSource" playsinline></video>
    <div class="grid">
        <aside class="panel"><canvas id="handCanvas" style="width:100%; height:250px; background:#000; border-radius:10px; transform:scaleX(-1);"></canvas></aside>
        <main class="panel" style="padding:0; border:none;"><div class="terminal" id="term">READY FOR INPUT...</div></main>
        <aside class="panel" style="display:flex;"><div class="orb" id="orb"></div></aside>
        <footer>
            <input type="text" id="userInput" placeholder="COMMAND MASTER..." autocomplete="off">
            <button class="btn" id="sendBtn">âž”</button>
        </footer>
    </div>
    <script>
        const KEY = "AIzaSyC5d-8sMwErf6LZiZA_A_gV9DRYKYbmrV0"; //
        const URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${KEY}`;

        async function send(cmd) {
            if(!cmd) return;
            const term = document.getElementById('term');
            const orb = document.getElementById('orb');
            orb.classList.add('active');
            term.innerHTML += `<div style="color:var(--neon); margin-top:10px;">> MASTER: ${cmd}</div>`;
            
            try {
                const r = await fetch(URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: cmd }] }] })
                });
                const d = await r.json();
                if(d.error) throw new Error(d.error.message);
                const txt = d.candidates[0].content.parts[0].text;
                term.innerHTML += `<div style="margin-top:10px;">> GOGO: ${txt}</div>`;
                window.speechSynthesis.speak(new SpeechSynthesisUtterance(txt));
            } catch (e) {
                term.innerHTML += `<div style="color:var(--err); margin-top:10px;">[FAIL]: ${e.message}</div>`;
            } finally { orb.classList.remove('active'); term.scrollTop = term.scrollHeight; }
        }

        document.getElementById('sendBtn').onclick = () => { send(document.getElementById('userInput').value); document.getElementById('userInput').value = ""; };
        
        // Mediapipe Init
        const hands = new Hands({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`});
        hands.setOptions({ maxNumHands: 1, minDetectionConfidence: 0.8 });
        hands.onResults((res) => {
            const ctx = document.getElementById('handCanvas').getContext('2d');
            ctx.clearRect(0, 0, 640, 480);
            if (res.multiHandLandmarks) {
                for (const lm of res.multiHandLandmarks) {
                    drawConnectors(ctx, lm, HAND_CONNECTIONS, {color: '#00f2ff', lineWidth: 2});
                }
            }
        });
        new Camera(document.getElementById('vSource'), { onFrame: async () => { await hands.send({image: document.getElementById('vSource')}); } }).start();
    </script>
</body>
</html>

